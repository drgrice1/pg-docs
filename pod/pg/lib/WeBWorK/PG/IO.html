<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset='UTF-8'>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>WeBWorK::PG::IO</title>
	<link rel="shortcut icon" href="/favicon.ico">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://openwebwork.github.io/pg-docs/pod/assets/podviewer.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" defer></script>
	<script src="https://openwebwork.github.io/pg-docs/pod/assets/podviewer.js" defer></script>
</head>
<body>
	<div class="pod-header navbar navbar-dark bg-primary px-3 position-fixed border-bottom border-dark">
		<div class="container-fluid d-flex flex-column d-md-block">
			<h1 class="navbar-brand fw-bold fs-5 me-auto me-md-0 mb-2 mb-md-0">WeBWorK::PG::IO</h1>
			<button class="navbar-toggler d-md-none me-auto" type="button" data-bs-toggle="offcanvas"
				data-bs-target="#sidebar" aria-controls="sidebar" aria-label="Toggle Sidebar">
				<span class="navbar-toggler-icon"></span>
			</button>
		</div>
	</div>
	<aside class="offcanvas-md offcanvas-start border-end border-dark position-fixed" tabindex="-1"
		id="sidebar" aria-labelledby="sidebar-label">
		<div class="offcanvas-header">
			<h2 class="offcanvas-title" id="sidebar-label">Index</h2>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebar"
			   	aria-label="Close">
			</button>
		</div>
		<div class="offcanvas-body p-md-3 w-100">
			<nav>
				<ul class="nav flex-column w-100">
					<li class="nav-item">
						<a href="https://openwebwork.github.io/pg-docs/pod" class="nav-link p-0">WeBWorK POD Home</a>
					</li>
					<li class="nav-item">
						<a href="http://webwork.maa.org/wiki/WeBWorK_Main_Page" class="nav-link p-0">WeBWorK Wiki</a>
					</li>
					<li><hr></li>
<li class="nav-item"><a class="nav-link p-0" href="#NAME">NAME</a></li><li class="nav-item"><a class="nav-link p-0" href="#DESCRIPTION">DESCRIPTION</a></li><li class="nav-item"><a class="nav-link p-0" href="#FUNCTIONS">FUNCTIONS</a>
    <ul class="nav flex-column w-100">
      <li class="nav-item"><a class="nav-link p-0" href="#includePGtext">includePGtext</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#read_whole_problem_file">read_whole_problem_file</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#read_whole_file">read_whole_file</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#fileFromPath">fileFromPath</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#directoryFromPath">directoryFromPath</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#createFile">createFile</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#saveDataToFile">saveDataToFile</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#createDirectory">createDirectory</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#remove_tree">remove_tree</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#pg_tmp_dir">pg_tmp_dir</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#externalCommand">externalCommand</a></li>
      <li class="nav-item"><a class="nav-link p-0" href="#AskSage">AskSage</a></li>
    </ul>
  </li>				</ul>
			</nav>
		</div>
	</aside>
	<div class="pod-page-container d-flex">
		<div class="container-fluid p-3 h-100" id="_podtop_">


<a href="#_podtop_"><h1 id="NAME">NAME</h1></a>

<p>WeBWorK::PG::IO - Functions used by <code>WeBWorK::PG::Translator</code> for file IO.</p>

<a href="#_podtop_"><h1 id="DESCRIPTION">DESCRIPTION</h1></a>

<p>This module defines several functions to be shared with a safe compartment by the PG translator. All exported methods are shared.</p>

<a href="#_podtop_"><h1 id="FUNCTIONS">FUNCTIONS</h1></a>

<h2 id="includePGtext">includePGtext</h2>

<p>This is used in processing some of the sample CAPA files and in creating aliases to redirect calls to duplicate problems so that they go to the original problem instead. It is called by includePGproblem.</p>

<p>Usage: <code>includePGtext($str)</code></p>

<p>Note that the <code>$str</code> parameter may be a string or a reference to a string.</p>

<p>It reads and evaluates the string in the same way that the Translator evaluates the string in a PG file.</p>

<h2 id="read_whole_problem_file">read_whole_problem_file</h2>

<p>Read the contents of a pg file.</p>

<p>Usage: <code>read_whole_problem_file($filePath)</code></p>

<p>Don&#39;t use for huge files. The file name will have .pg appended to it if it doesn&#39;t already end in .pg. This is used in importing additional .pg files as is done in the sample problems translated from CAPA. Returns a reference to a string containing the contents of the file.</p>

<h2 id="read_whole_file">read_whole_file</h2>

<p>Read the contents of a file. Don&#39;t use for huge files.</p>

<p>Usage: <code>read_whole_file($filePath)</code></p>

<h2 id="fileFromPath">fileFromPath</h2>

<p>Usage: <code>fileFromPath($path)</code></p>

<p>Returns the last segment of the path (i.e. the text after the last forward slash).</p>

<h2 id="directoryFromPath">directoryFromPath</h2>

<p>Usage: <code>directoryFromPath($path)</code></p>

<p>Returns the initial segments of the of the path (i.e. the text up to the last forward slash).</p>

<h2 id="createFile">createFile</h2>

<p>Usage: <code>createFile($fileName, $permission, $numgid)</code></p>

<p>Creates a file with the given name, permission bits, and group ID.</p>

<h2 id="saveDataToFile">saveDataToFile</h2>

<p><code>saveDataToFile($data, $filePath)</code></p>

<p>Saves <code>$data</code> to the file specified by <code>$filePath</code>. The <code>$filePath</code> may be an absolute path or may be specified relative to the html temporary directory specified in the PG environment. If the <code>$filePath</code> is not contained in the html temporary directory specified in the PG environment, then an exception is thrown and no file is written.</p>

<p>Nothing that is shared to the safe compartment should directly write to a file. Instead it should call this method to save data to a file.</p>

<h2 id="createDirectory">createDirectory</h2>

<p>Usage: <code>createDirectory($dirName, $permission, $numgid)</code></p>

<p>Creates a directory with the given name, permission bits, and group ID.</p>

<h2 id="remove_tree">remove_tree</h2>

<p>Usage: <code>remove_tree($dir)</code></p>

<p>Remove a directory and its contents.</p>

<h2 id="pg_tmp_dir">pg_tmp_dir</h2>

<p>Returns the temporary directory set in the WeBWorK::PG::Environment.</p>

<h2 id="externalCommand">externalCommand</h2>

<p>Usage: <code>externalCommand($command)</code></p>

<p>Returns the path to a requested external command that is defined in the <code>WeBWorK::PG::Environment</code>.</p>

<h2 id="AskSage">AskSage</h2>

<p>Usage: <code>AskSage($python, $args)</code></p>

<p>Executes a sage cell server query via curl and returns the result.</p>

		</div>
	</div>
</body>
</html>
