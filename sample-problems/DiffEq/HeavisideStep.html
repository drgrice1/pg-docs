<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>HeavisideStep</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.11/lib/codemirror.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.11/theme/tomorrow-night-eighties.min.css">
	<script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.11/addon/runmode/runmode-standalone.min.js" defer>
	</script>
	<script src="/home/runner/work/pg-docs/pg-docs/sample-problems/PG.js" defer></script>

	<style>
		.explanation {
			--bs-code-color: #971556;
		}
		.preamble {
			background-color: lightblue;
		}
		.setup {
			background-color: #ddffdd;
		}
		.statement {
			background-color: #eeb08199;
		}
		.answer {
			background-color: #ffffdd;
		}
		.solution {
			background-color: #ffb6c199;
		}
	</style>
</head>

<body class="p-3">
	<div class="container-fluid">
		<h1>Heaviside or Step Function</h1>
		<p>Differential Equations: adding the Heaviside function to the context.</p>
		<h2>POD for Macro Files</h2>
		<ul>
					<li class="text-danger">PGstandard.pl</li>
					<li class="text-danger">PGML.pl</li>
					<li><a href="https://pstaabp.github.io/pg-docs/pod/pg/macros/parsers/parserFunction.html">parserFunction.pl</a></li>
					<li class="text-danger">PGcourse.pl</li>
		</ul>
		<div class="row">
			<div class="col text-center"><h2 class="fw-bold fs-3">PG problem file</h2></div>
			<div class="col text-center"><h2 class="fw-bold fs-3">Explanation</h2></div>
		</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-dark position-absolute top-0 end-0 me-1 mt-1"
						style="z-index: 10" type="button" data-code="DOCUMENT();

loadMacros(&#39;PGstandard.pl&#39;, &#39;PGML.pl&#39;, &#39;parserFunction.pl&#39;, &#39;PGcourse.pl&#39;);
" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
							class="bi bi-clipboard" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
							<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
							<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
						</svg>
					</button>
					<pre class="CodeMirror cm-s-tomorrow-night-eighties m-0 h-100 p-3 border border-secondary overflow-x-scroll">DOCUMENT();

loadMacros('PGstandard.pl', 'PGML.pl', 'parserFunction.pl', 'PGcourse.pl');
</pre>
				</div>
				<div class="explanation preamble col-sm-12 col-md-6 order-md-last order-first border border-dark">
					<p><b>Preamble</b></p>
					<p>We load <code>parserFunction.pl</code> to make adding a named function to the context easier.
 Please see the POD documentation <code>parserFunction.pl</code>.</p>

				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-dark position-absolute top-0 end-0 me-1 mt-1"
						style="z-index: 10" type="button" data-code="Context(&#39;Numeric&#39;)-&gt;variables-&gt;are(t =&gt; &#39;Real&#39;);
Context()-&gt;functions-&gt;add(
    step =&gt; {
        class =&gt; &#39;Parser::Legacy::Numeric&#39;,
        perl  =&gt; &#39;Parser::Legacy::Numeric::do_step&#39;
    },
);

parserFunction(&quot;u(t)&quot; =&gt; &quot;step(t)&quot;);

$a = random(3, 6);
$f = Formula(&quot;5 u(t-$a)&quot;);

$ans1 = List($f-&gt;eval(t =&gt; $a - 1), $f-&gt;eval(t =&gt; $a), $f-&gt;eval(t =&gt; $a + 1));

$ans2 = $f-&gt;with(
    limits     =&gt; [ $a - 5,     $a + 5 ],
    test_at    =&gt; [ [ $a - 1 ], [ $a - 0.0000001 ], [$a], [ $a + 0.0000001 ], [ $a + 1 ] ],
    num_points =&gt; 10,
);
" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
							class="bi bi-clipboard" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
							<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
							<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
						</svg>
					</button>
					<pre class="CodeMirror cm-s-tomorrow-night-eighties m-0 h-100 p-3 border border-secondary overflow-x-scroll">Context('Numeric')->variables->are(t => 'Real');
Context()->functions->add(
    step => {
        class => 'Parser::Legacy::Numeric',
        perl  => 'Parser::Legacy::Numeric::do_step'
    },
);

parserFunction("u(t)" => "step(t)");

$a = random(3, 6);
$f = Formula("5 u(t-$a)");

$ans1 = List($f->eval(t => $a - 1), $f->eval(t => $a), $f->eval(t => $a + 1));

$ans2 = $f->with(
    limits     => [ $a - 5,     $a + 5 ],
    test_at    => [ [ $a - 1 ], [ $a - 0.0000001 ], [$a], [ $a + 0.0000001 ], [ $a + 1 ] ],
    num_points => 10,
);
</pre>
				</div>
				<div class="explanation setup col-sm-12 col-md-6 order-md-last order-first border border-dark">
					<p><b>Setup</b></p>
					<p>We add the step function to the context with the name step. The function
 <code>step(t)</code> is the Heaviside function and takes the value 1 when $t > 0$, and the value
 0 when $t \leq 0$. We will use the function step when evaluating the Heaviside function
 to obtain an answer that is a number.</p>

<p>For more details on adding the Heaviside function to the context, see the forum
 discussion on the Heaviside step function</p>

<p>For the second question, since answers are checked numerically by comparing the student
 answer to the correct answer at several randomly points in the domain (the default is 5 points)
 in an interval (the default is <code>[-1,1]</code>), the function <code>step(t) = u(t)</code> is not very robust when
 checking answers using these defaults. For example, if a student types in the answer <code>u(t-0.1)</code> and
 the correct answer is u(t), there is a good chance that the student's answer will be marked correct,
 since the probability that a test point was chosen in the interval (0,0.1) is much less than 100%.
 Also, if the correct answer were u(t-5), then a student could enter the answer 0 and be marked correct
 because the correct answer is identically zero on the interval <code>[-1,1]</code>.</p>

<p>To make the answer checking robust, in $answer2 we specify a larger domain centered at $a using limits,
 we require four of the test points always be used, and that there should be 10 test points total (the
 four we specified and six others generated at random). Notice that we used the construction <code>$f-&gt;with(...)</code>
 to do this (using <code>$f-&gt;{test_at} = [[1],[2]]</code> would generate an error because the functions we added to the
 context aren't "blessed" with enough permissions to modify $f in that way).</p>

<p>In part (b), since the students never actually see the values of the function u(t),
 we could have defined the function as</p>

<p><code>parserFunction("u(t)" =&gt;
  "1.5 * sin(e*t) + 5*pi/3 + arctan(t)"
 );</code>
 If we had defined <code>u(t)</code> this way, we would not have had to add the function <code>step(t)</code> to the context
 and we could have used the defaults for the answer checker. Notice that the function <code>u(t)</code> is never
 zero, is not constant, is differentiable, and takes moderately sized values, which makes its answer
 checking very robust using the defaults for the answer checker. Further, because of the arctangent,
 it is not periodic and so <code>u(t)-u(t-a)</code> should never be identically zero. Also, the formula for <code>u(t)</code> is
 not something students are likely to input as an answer out of nowhere. The function <code>u(t)</code> is great as a
 named function that stands in for the Heaviside function when the answer is a function. However, if the
 answer is a number obtained by evaluating the Heaviside function, then step(t) should be used or the function
 <code>u(t)</code> should be properly defined as the Heaviside function for obvious reasons.</p>

				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-dark position-absolute top-0 end-0 me-1 mt-1"
						style="z-index: 10" type="button" data-code="BEGIN_PGML
Let [` u(t) `] be the Heaviside step function defined by
[`` u(t) =\left\{\begin{array}{lcl}
    0 &amp;&amp; \mbox {if}\quad x \leq 0, \\
    1 &amp;&amp; \mbox {if}\quad x &gt; 0.
\end{array}\right . ``]

a. Evaluate the function [`[$f]`] when [`t`] is [`[$a-1], [$a] `],
and [` [$a+1] `] and enter your answers as a comma separated list.

    [________________]{$ans1-&gt;cmp(ordered =&gt; 1)}

b. Suppose the answer is the function [` [$f] `] .

    [________________]{$ans2}
END_PGML
" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
							class="bi bi-clipboard" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
							<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
							<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
						</svg>
					</button>
					<pre class="CodeMirror cm-s-tomorrow-night-eighties m-0 h-100 p-3 border border-secondary overflow-x-scroll">BEGIN_PGML
Let [` u(t) `] be the Heaviside step function defined by
[`` u(t) =\left\{\begin{array}{lcl}
    0 && \mbox {if}\quad x \leq 0, \\
    1 && \mbox {if}\quad x > 0.
\end{array}\right . ``]

a. Evaluate the function [`[$f]`] when [`t`] is [`[$a-1], [$a] `],
and [` [$a+1] `] and enter your answers as a comma separated list.

    [________________]{$ans1->cmp(ordered => 1)}

b. Suppose the answer is the function [` [$f] `] .

    [________________]{$ans2}
END_PGML
</pre>
				</div>
				<div class="explanation statement col-sm-12 col-md-6 order-md-last order-first border border-dark">
					<p><b>Statement</b></p>
					

				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-dark position-absolute top-0 end-0 me-1 mt-1"
						style="z-index: 10" type="button" data-code="BEGIN_PGML_SOLUTION
Solution explanation goes here.
END_PGML_SOLUTION

ENDDOCUMENT();" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
							class="bi bi-clipboard" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
							<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
							<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
						</svg>
					</button>
					<pre class="CodeMirror cm-s-tomorrow-night-eighties m-0 h-100 p-3 border border-secondary overflow-x-scroll">BEGIN_PGML_SOLUTION
Solution explanation goes here.
END_PGML_SOLUTION

ENDDOCUMENT();</pre>
				</div>
				<div class="explanation solution col-sm-12 col-md-6 order-md-last order-first border border-dark">
					<p><b>Solution</b></p>
					

				</div>
			</div>
	</div>

	<script type="module">
		for (const pre of document.body.getElementsByTagName('pre')) {
			CodeMirror.runMode(pre.textContent, 'PG', pre);
		}

		for (const btn of document.querySelectorAll('.clipboard-btn')) {
			btn.addEventListener('click', () => navigator.clipboard.writeText(btn.dataset.code));
		}
	</script>
</body>

</html>
