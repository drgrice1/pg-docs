<html>
	<head>
		<style>
			body {
				padding: 20px;
			}
			.code {
				border: 1px gray dashed;
				background-color: #2a3b4d;
				overflow-x: scroll;
			}
			.explanation {
				border: 1px black solid;
			}
			.preamble {
				background-color: lightblue;
			}
			.setup {
				background-color: #ddffdd;
			}
			.statement {
				background-color: #eeb081;
			}
			.answer {
				background-color: #ffffdd;
			}
			.solution {
				background-color: lightpink;
			}
			.header {
				font: 125% bold;
			}
		</style>
		<script>
			document.addEventListener('DOMContentLoaded', () => {
				const code_elems = document.getElementsByClassName("code");
				for (const el of code_elems) {
					const b = el.getElementsByTagName('button');
					const code = el.getElementsByClassName('hidden-code');
					b[0].addEventListener('click', () => {
						navigator.clipboard.writeText(code[0].textContent);
					})
				}
			});
		</script>
	</head>

<div class="container">
	<div class="row pb-3">
		<h1>DifferentiateFunction</h1>
	</div>
	<div class="row pb-3">
		<div class="col">
		Differential calculus: difference quotients
		</div>
		<div class="col">
			<h2>POD for macro files</h2>
			<ul>
			
					<li style="color: red">PGstandard.pl</li>
			
					<li style="color: red">PGML.pl</li>
			
					<li style="color: red">PGcourse.pl</li>
			
			</ul>
		</div>
	</div>
	<div class="row">
		<div class="col header">
			PG problem file
		</div>
		<div class="col header">
			Explanation
		</div>
	</div>
	
		<div class="row">
			<div class="col code p-0">
				<button class="float-end" type="button" class="btn btn-sm btn-light">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
						<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
						<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
					</svg>
				</button>
				<pre><code class="language-perl">DOCUMENT();

loadMacros('PGstandard.pl','PGML.pl','PGcourse.pl');

TEXT(beginproblem());
</code></pre>
				<div class="hidden-code" style="display: none"> DOCUMENT();

loadMacros('PGstandard.pl','PGML.pl','PGcourse.pl');

TEXT(beginproblem());
</div>
			</div>
			<div class="col preamble explanation">
				<p><b>Preamble</b></p>
				

			</div>
		</div>
	
		<div class="row">
			<div class="col code p-0">
				<button class="float-end" type="button" class="btn btn-sm btn-light">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
						<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
						<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
					</svg>
				</button>
				<pre><code class="language-perl">Context('Numeric')->variables->add(k=>'Real');
Context()->flags->set(
  reduceConstants=>0, # no decimals
  reduceConstantFunctions=>1, # combine 4+5*2?
  formatStudentAnswer=>'parsed', # no decimals
);

$a = random(6,9,1);
$k = random(3,5,1);

$f = Formula("k x^2");
$fx = $f->D('x');

$ans1 = $fx;

$ans2 = $fx->substitute(k=>$k); # formula
# $ans2 = $fx->eval(k=>$k); # gives errors, must eval to real

$ans3 = $fx->substitute(x=>$a*pi,k=>$k); # formula
#$ans3 = $fx->eval(x=>$a*pi,k=>$k); # real
</code></pre>
				<div class="hidden-code" style="display: none"> Context('Numeric')->variables->add(k=>'Real');
Context()->flags->set(
  reduceConstants=>0, # no decimals
  reduceConstantFunctions=>1, # combine 4+5*2?
  formatStudentAnswer=>'parsed', # no decimals
);

$a = random(6,9,1);
$k = random(3,5,1);

$f = Formula("k x^2");
$fx = $f->D('x');

$ans1 = $fx;

$ans2 = $fx->substitute(k=>$k); # formula
# $ans2 = $fx->eval(k=>$k); # gives errors, must eval to real

$ans3 = $fx->substitute(x=>$a*pi,k=>$k); # formula
#$ans3 = $fx->eval(x=>$a*pi,k=>$k); # real
</div>
			</div>
			<div class="col setup explanation">
				<p><b>Setup</b></p>
				<p>The partial differentiation operator is <code>-&gt;D('x')</code>.</p>

<p>The main difference between <code>eval()</code> and <code>substitute()</code> is</p>

<ul>
<li><code>eval()</code> returns a <code>Real</code> (a number)</li>
<li><code>substitute()</code> returns a <code>Formula</code></li>
</ul>

<p>Since plugging a particular number <code>$k</code> into the Formula <code>$f</code> returns a Formula <code>$k x</code>,
 if we had used the eval method <code>$ans2 = $fx-&gt;eval(k=&gt;$k);</code> instead of the <code>substitute</code>
 method, we would get errors because <code>$k x</code> is a Formula, not a Real. Note: You cannot
 use eval or substitute to perform function composition, i.e., you can only plug in
 numbers, not formulas.</p>

<p>When the answer is a constant, we can use either the eval method, in which case the
 answer would be a Real, or the substitute method, in which case the answer would
 be a constant Formula. If you use the eval method, <code>$ans3 = $fx-&gt;eval(x=&gt;$a*pi,k=&gt;$k);</code>
 the answer will be a Real and will display as a single number in decimal format.
 If you use the substitute method instead, you have more control over how the answer
 will be displayed. In particular, the context flag reduceConstants controls whether
 the answer will be reduced to a single number in decimal format, the flag
 reduceConstantFunctions controls whether or not expressions such as <code>4+5*2</code> are
 reduced to 14, and setting the context flag <code>formatStudentAnswer=&gt;'parsed'</code> will
 prevent the student's answer from being reduced to a single number in decimal
 format and will also display pi instead of 3.14159...</p>

<p>For more details, see eval versus substitute, formatting correct answers, and
 constants in problems.</p>

			</div>
		</div>
	
		<div class="row">
			<div class="col code p-0">
				<button class="float-end" type="button" class="btn btn-sm btn-light">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
						<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
						<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
					</svg>
				</button>
				<pre><code class="language-perl">BEGIN_PGML
Suppose [` f(x) = [$f] `] where [` k `] is a constant.

a. [` f ' (x) = `] [_____]{$ans1}

b. If [` k = [$k] `] then [` f ' (x) = `] [_____]{$ans2}

c. If [` k = [$k] `] then [` f ' ([$a]\pi) = `] [_____]{$ans3}
END_PGML
</code></pre>
				<div class="hidden-code" style="display: none"> BEGIN_PGML
Suppose [` f(x) = [$f] `] where [` k `] is a constant.

a. [` f ' (x) = `] [_____]{$ans1}

b. If [` k = [$k] `] then [` f ' (x) = `] [_____]{$ans2}

c. If [` k = [$k] `] then [` f ' ([$a]\pi) = `] [_____]{$ans3}
END_PGML
</div>
			</div>
			<div class="col statement explanation">
				<p><b>Statement</b></p>
				

			</div>
		</div>
	
		<div class="row">
			<div class="col code p-0">
				<button class="float-end" type="button" class="btn btn-sm btn-light">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
						<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
						<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
					</svg>
				</button>
				<pre><code class="language-perl">BEGIN_PGML_SOLUTION
Solution explanation goes here.
END_PGML_SOLUTION

ENDDOCUMENT();</code></pre>
				<div class="hidden-code" style="display: none"> BEGIN_PGML_SOLUTION
Solution explanation goes here.
END_PGML_SOLUTION

ENDDOCUMENT();</div>
			</div>
			<div class="col solution explanation">
				<p><b>Solution</b></p>
				

			</div>
		</div>
	
</div>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/base16/eva.min.css">
<script type="module">
import hljs from 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/es/highlight.min.js';
//  and it's easy to individually load additional languages
//import go from 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/es/languages/go.min.js';
//hljs.registerLanguage('go', go);
hljs.highlightAll();
</script>

</html>
